{% extends "base.html" %}

{% block title %}{{ board.name }} #{{ record.id }} - Auto-Board{% endblock %}

{% block content %}
{% include 'common/nav.html' %}

<div class="px-4 py-8 sm:p-8 mx-auto" style="max-width: 95vw;">
    <!-- Header -->
    <div class="mb-8">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-[#1a1a2e] mb-1">{{ board.name }}</h1>
                <p class="text-gray-600 text-sm">기록 #{{ record.id }}</p>
            </div>
            <div class="flex gap-2">
                <a href="/boards/{{ board.id }}/records/{{ record.id }}/edit"
                    class="flex-1 sm:flex-none px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold text-center sm:text-left transition-colors min-h-10 sm:min-h-auto flex items-center justify-center">
                    수정
                </a>
                <button onclick="deleteRecord({{ board.id }}, {{ record.id }})"
                    class="flex-1 sm:flex-none px-4 sm:px-6 py-2 sm:py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold text-center transition-colors min-h-10 sm:min-h-auto">
                    삭제
                </button>
            </div>
        </div>
    </div>

    <!-- Record Details -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 sm:p-8">
        <div class="space-y-6 sm:space-y-8">
            {% for column in columns %}
            <div class="pb-6 sm:pb-8 border-b border-gray-200 last:border-b-0 last:pb-0 sm:last:pb-0">
                <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2">{{ column.label }}</p>
                <p class="text-base sm:text-lg text-gray-900 break-words">{{ record.get(column.name, '-') }}</p>
            </div>
            {% endfor %}

            <!-- Metadata Section -->
            <div class="mt-8 pt-8 border-t border-gray-200">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2">생성일</p>
                        <p class="text-sm text-gray-700">{{ record.created_at if record.created_at else 'N/A' }}</p>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2">수정일</p>
                        <p class="text-sm text-gray-700">{{ record.updated_at if record.updated_at else 'N/A' }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="mt-8 pt-8 border-t border-gray-200 flex flex-col sm:flex-row gap-3">
            <a href="/boards/{{ board.id }}/records"
                class="flex-1 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-bold text-center transition-colors">
                목록으로
            </a>
        </div>
    </div>
</div>

<script>
function deleteRecord(boardId, recordId) {
    if (confirm('이 기록을 삭제하시겠습니까?')) {
        fetch(`/records/${boardId}/${recordId}`, {
            method: 'DELETE'
        })
        .then(response => {
            if (response.ok) {
                alert('기록이 삭제되었습니다.');
                window.location.href = `/boards/${boardId}/records`;
            } else {
                alert('삭제 실패: ' + response.statusText);
            }
        })
        .catch(error => {
            alert('오류가 발생했습니다: ' + error);
        });
    }
}
</script>

{% endblock %}
