{% extends "base.html" %}

{% block title %}{{ board.name }} #{{ record.id }} - Auto-Board{% endblock %}

{% block content %}
{% include 'common/nav.html' %}

<div class="p-8 max-w-2xl mx-auto">
    <!-- Header -->
    <div class="mb-8 flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-bold text-[#1a1a2e] mb-2">{{ board.name }}</h1>
            <p class="text-gray-600">기록 #{{ record.id }}</p>
        </div>
        <div class="flex gap-2">
            <a href="/boards/{{ board.id }}/records/{{ record.id }}/edit"
                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold">
                수정
            </a>
            <button onclick="deleteRecord({{ board.id }}, {{ record.id }})"
                class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-bold">
                삭제
            </button>
        </div>
    </div>

    <!-- Record Details -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8">
        <div class="space-y-6">
            {% for column in columns %}
            <div>
                <p class="text-sm text-gray-500 font-semibold mb-1">{{ column.label }}</p>
                <p class="text-lg text-gray-900">{{ record.get(column.name, '-') }}</p>
            </div>
            {% endfor %}

            <div class="pt-6 border-t border-gray-200">
                <p class="text-sm text-gray-500 font-semibold mb-1">생성일</p>
                <p class="text-sm text-gray-700">{{ record.created_at if record.created_at else 'N/A' }}</p>
            </div>

            <div>
                <p class="text-sm text-gray-500 font-semibold mb-1">수정일</p>
                <p class="text-sm text-gray-700">{{ record.updated_at if record.updated_at else 'N/A' }}</p>
            </div>
        </div>

        <!-- Navigation -->
        <div class="mt-8 pt-8 border-t border-gray-200 flex gap-4">
            <a href="/boards/{{ board.id }}/records"
                class="flex-1 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-bold text-center">
                목록으로
            </a>
        </div>
    </div>
</div>

<script>
function deleteRecord(boardId, recordId) {
    if (confirm('이 기록을 삭제하시겠습니까?')) {
        fetch(`/records/${boardId}/${recordId}`, {
            method: 'DELETE'
        })
        .then(response => {
            if (response.ok) {
                alert('기록이 삭제되었습니다.');
                window.location.href = `/boards/${boardId}/records`;
            } else {
                alert('삭제 실패: ' + response.statusText);
            }
        })
        .catch(error => {
            alert('오류가 발생했습니다: ' + error);
        });
    }
}
</script>

{% endblock %}
